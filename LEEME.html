<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8"/>
    </head>
    <body>
    <h1>Turbochess</h1>
    <p> Turbochess es una plataforma que permite jugar ajedrez online,
    </p>
    <h2>Autores</h2>
    <ul>
        <li>
            Roxanne Caiafa
        </li>
        <li>
            Vladimir Ustimenko
        </li>
    </ul>

    <h2>¿Cómo jugar?</h2>
    <p>En la barra superior la pestaña "Room" permite crear una partida o unirte a una ya creada.
    al crear una partida tienes la opción de poner un límite de participantes, ya que en cada partida se pueden
        tener espectadores y dichos espectadores pueden hacer apuestas.

        Existe la posibilidad de abandonar la partida, esta acción se traduce como haber perdido el juego.
        Si hay problemas de conexión el juego de para y puedes retomarlo volviendo a unirte a esta sala, en la misma pestaña "Room".
    </p>


    <h2>Amigos</h2>
    <p>
        Puedes hacer amigos!
        En la barra superior puedes buscar usuarios y entrar en su perfil.
        Si el usuario no es tu amigo aún, hay un botón para enviar una petición de amistad,
        si ya habías enviado una petición de amistad, se informará que la petición ya ha sido enviada.
        La lista de amigos está disponible en la página principal "home" a un lateral.
        En la barra lateral donde aparece la lista de amigos, también se lista las peticiones de amistad aún no contestadas.


    </p>

    <h2> Perfil </h2>
    <p>En el perfil de usuario se puede ver toda la información como:
    <ul>
        <li>Partidas ganadas</li>
        <li>Partidas jugadas</li>
        <li>ELO (puntuación)</li>
        <li>Coins(ganancias de apuestas)</li>
        <li>historial de partidas anteriores</li>
    </ul>

    <h2> Historial de partidas</h2>
    <p> En la pestaña "History" hay una lista de las partidas ya jugadas
    si le das al boton del play puedes reproducirla movimiento por movimiento.
    </p>

    <h2>ELO</h2>
    <p>El sistema de puntuación se mide en base al jugador en contra,
    por lo que si ganas a un usuario mas experto esto te subirá mas el ELO.
    la base de puntos es 100 y 150 es el maximo que se puede ganar
    </p>

    <h2>Apuestas</h2>
    <p>En cada partida se pueden hacer apuestas, al final de la partida
        las personas que hayan apostado por el ganador ganará lo que ha apostado
        en funcion de cuando haya hecho la apuesta(movimientos en la partida), por ejemplo si faltan pocos turnos para terminar la partida
        tu ganancia será muy pequeña.
    </p>

    <h2>Cambios realizados sobre entregas anteriores</h2>
    <ul>
        <li>Dos jugadores pueden jugar, antes solo se podia jugar con una IA</li>
        <li>Puede haber espectadores de las partidas</li>
        <li>listado de partidas</li>
        <li>Comunicarse con el admin</li>
        <li>Guardar el estado del juego por si se cae la conexion a algún jugador</li>
        <li>Sistema de ELO actualizad</li>
        <li>Sistema de apuestas actualizadas</li>
        <li>Reproducir partidas anteriores</li>
        <li>Recursos en local</li>

    </ul>

    </p>
            <h2>Usuarios de prueba </h2>
            <ul>
            <li>Admin
                username: pepa
                password: pepa
            </li>
                <p>Pepa además de usuario, es admin,
                    por  lo que tendrá un icono de admin
                    con el que podrá gestionar la aplicación.
                    En el panel lateral se encuentran la lista de amigos
                    y de peticiones de amistad,
                    puede aceptar o rechazar la petición de amistad de pepito, entrando al link
                    del nombre de usuario que le ha enviado la invitacion. </p>
            <li>
                username: ana
                password: ana
            </li>
                <p>Ana solo tiene el rol de User,
                    al iniciar sesión puede aceptar o rechazar la invitacion de amistad
                el cambio se verá reflejado, e incluso si rechaza dicha peticion, podría buscar
                    al usuario en el buscador de usuarios en el nav de la parte superior de la pagina
                </p>

                <li>
                    username: juanito
                    password: juanito
                </li>
                <li>
                    username: pepito
                    password: pepito
                </li>
        </ul>

<h2> Mejoras post-examen y cambios corespondientes</h2>
    <li>
        <p>Mejora:  Todos mensajes enviados entre el cliente y el servidor se han reducido.</p>
        <p>Cambios: Utilizando Principal y @DestinationVariable room se puede identificar el usuario y la sala a la cual pertenece el
        mensaje. Como resultado no es posible enviar mensajes fingiendo ser una otra persona.
        </p>
        <p>Ficheros: RoomAPIController y RoomMessagingController</p>

    </li>
    <li>
        <p>Mejora:  No se puede ganar la partida mandando una declaración de victoria por AJAX</p>
        <p>Cambios: Un usuario puede ganar la partida mandando una declaración de victoria a api/room/game_over. Si su openente había desconectado, es permisible.
                    Tambien puede ganar de modo normal, por consiguir jaque mate. En este caso es el perdedor que declara su pérdida.
        </p>
        <p>Ficheros: RoomAPIController y app.js</p>
    </li>

    <li>
        <p>Mejora: El acceso a todas las entidades es estandar. Cada entidad tiene su propio Repository y Service.
            He quitado *ServiceImp clases porque no tenían sentido.</p>
        <p>Cambios: No hay SQL crudo fuera de las clases Repository. Tampoco hay EntityManager magia, toda la persistencia
            se hace de exactamente misma manera que ayuda con la legibilidad de los métodos que modifican varias tablas.</p>
        <p>Ficheros: service/</p>
    </li>

    <li>
        <p>Mejora: Ya no es posible suscribirse a las salas a través de modificar el Javascript.</p>
        <p>Cambios: De forma similar a Principal, he aprovachado de la información guardada en STOMP headers, sessionId especificamente.
           Sólo los usuarios que se habían unido a la sala por una llamada a api/room/join 0 api/room/create pueden suscribirse con éxito.</p>
        <p>Ficheros: RoomAPIController y WebSocketEventListener</p>
    </li>

    <li>
        <p>Mejora: Validación basica de jugadas</p>
        <p>Cambios: Antes de retransmitirse las jugadas deben aprobar un regex.</p>
        <p>Ficheros: Move y RoomMessagingController</p>
    </li>

    <li>
        <p>Mejora: Actualización de ELO para victorias, pérdidas y empates</p>
        <p>Cambios: Una fórmula simplificada</p>
        <p>Ficheros: User</p>
    </li>

    <li>
        <p>Mejora: Pruebas de condiciones para victorias, pérdidas y empates</p>
        <p>Cambios: He añadido 3 endpoints para declarar victoria (cuando el oponente sale de la sala);
                    pérdidas(cualquier jugador puede declarar su pérdida);
                    o empate(sugerirlo o aceptarlo si el openente lo ha sugerido) </p>
        <p>Ficheros: app.js, roomApiController</p>
    </li>
    <h2>Mejoras que no he hecho</h2>
    <li>Karate: he intentado escribir algunas pruebas pero no consegí autentificación más básica</li>
    <li>Reloj: no he tenido suficiente tiempo</li>
    </body>
</html>